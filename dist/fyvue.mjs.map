{"version":3,"file":"fyvue.mjs","sources":["../node_modules/.pnpm/mitt@3.0.0/node_modules/mitt/dist/mitt.mjs","../src/lib/klb-i18n-backend.js"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","'use strict'\n\nconst defaults = {\n  allowMultiLoading: false,\n};\n\nclass Backend {\n  constructor(services, options) {\n    this.init(services, options);\n\n    this.type = 'backend';\n  }\n\n  init(services, options = {}) {\n    this.services = services;\n\n    this.options = {\n      ...defaults,\n      ...this.options,\n      ...options,\n    };\n  }\n\n  read(language, namespace, callback) {\n    if (language.length != 5) {\n      // ignore this (tip: you should set load: 'currentOnly' in i18next options)\n      // this can happen if i18next attempts to load spepcial language \"dev\" or \"en\" instead of \"en-US\"\n      callback(null, {});\n      return;\n    }\n    if ((typeof FW !== \"undefined\") && (language == FW.Locale) && (typeof FW.i18n !== \"undefined\")) {\n      // we already know about this language, use it\n      callback(null, FW.i18n);\n      return;\n    }\n\n    // load via: /l/<lng>/locale.json\n    var pfx = \"\";\n    if (typeof FW !== \"undefined\") {\n        pfx = FW.prefix;\n    }\n    // pfx=\"\"\n    // pfx=\"/l/en-US\"\n    // pfx=\"/b/test/l/en-US/z/foobar\"\n    var newpfx = pfx.replace(/\\/l\\/[a-z]{2}-[A-Z]{2}/, \"/l/\"+language);\n    if (newpfx == pfx) {\n        newpfx = newpfx = \"/l/\"+language;\n    }\n    // fallback to fetch: /_special/locale/<lng>.json\n    fetch(newpfx+\"/_special/locale.json\").catch(function(err) { return fetch(\"/_special/locale/\"+language+\".json\"); })\n      .then(function(res) {\n        if (!res.ok) {\n          const retry = res.status >= 500 && res.status < 600; // don't retry for 4xx codes\n    callback(`failed loading i18n`, retry);\n    return;\n        }\n        return res.json();\n      })\n      .then(function(res) { callback(null, res); })\n      .catch(function(err) {\n        callback(err, false);\n      });\n  }\n}\n\nBackend.type = 'backend';\n\nexport default Backend;\n"],"names":[],"mappings":"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"}